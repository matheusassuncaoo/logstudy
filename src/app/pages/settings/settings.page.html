<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button (click)="goBack()" defaultHref="/tabs/perfil"></ion-back-button>
    </ion-buttons>
    <ion-title>Configurações</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="settings-container">
    <!-- Profile Section -->
    <div class="settings-section">
      <h2>Perfil</h2>
      <ion-list>
        <ion-item>
          <ion-avatar slot="start">
            <ion-icon name="person-circle" *ngIf="!user.avatar"></ion-icon>
          </ion-avatar>
          <ion-label>
            <h3>{{ user.name }}</h3>
            <p>{{ user.email }}</p>
          </ion-label>
        </ion-item>

        <ion-item button>
          <ion-icon name="person-outline" slot="start"></ion-icon>
          <ion-label>Editar Perfil</ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>

        <ion-item button>
          <ion-icon name="key-outline" slot="start"></ion-icon>
          <ion-label>Alterar Senha</ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>
      </ion-list>
    </div>

    <!-- Notifications Section -->
    <div class="settings-section">
      <h2>Notificações</h2>
      <ion-list>
        <ion-item>
          <ion-icon name="timer-outline" slot="start"></ion-icon>
          <ion-label>Fim do Pomodoro</ion-label>
          <ion-toggle [(ngModel)]="notifications.pomodoroEnd" color="primary"></ion-toggle>
        </ion-item>

        <ion-item>
          <ion-icon name="cafe-outline" slot="start"></ion-icon>
          <ion-label>Fim da Pausa</ion-label>
          <ion-toggle [(ngModel)]="notifications.breakEnd" color="primary"></ion-toggle>
        </ion-item>

        <ion-item>
          <ion-icon name="alarm-outline" slot="start"></ion-icon>
          <ion-label>Lembrete Diário</ion-label>
          <ion-toggle [(ngModel)]="notifications.dailyReminder" color="primary"></ion-toggle>
        </ion-item>

        <ion-item>
          <ion-icon name="bar-chart-outline" slot="start"></ion-icon>
          <ion-label>Relatório Semanal</ion-label>
          <ion-toggle [(ngModel)]="notifications.weeklyReport" color="primary"></ion-toggle>
        </ion-item>
      </ion-list>
    </div>

    <!-- Timer Preferences Section -->
    <div class="settings-section">
      <h2>Preferências do Timer</h2>
      <ion-list>
        <ion-item>
          <ion-label position="stacked">
            Tempo de Foco Padrão (min)
            <ion-text color="medium" class="value-display">{{ preferences.defaultPomodoroLength }} min</ion-text>
          </ion-label>
          <ion-range 
            [(ngModel)]="preferences.defaultPomodoroLength"
            min="15" 
            max="60" 
            step="5"
            pin="true"
            color="primary">
          </ion-range>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">
            Pausa Curta Padrão (min)
            <ion-text color="medium" class="value-display">{{ preferences.defaultShortBreak }} min</ion-text>
          </ion-label>
          <ion-range 
            [(ngModel)]="preferences.defaultShortBreak"
            min="3" 
            max="10" 
            step="1"
            pin="true"
            color="secondary">
          </ion-range>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">
            Pausa Longa Padrão (min)
            <ion-text color="medium" class="value-display">{{ preferences.defaultLongBreak }} min</ion-text>
          </ion-label>
          <ion-range 
            [(ngModel)]="preferences.defaultLongBreak"
            min="10" 
            max="30" 
            step="5"
            pin="true"
            color="tertiary">
          </ion-range>
        </ion-item>

        <ion-item>
          <ion-icon name="volume-medium-outline" slot="start"></ion-icon>
          <ion-label>Som</ion-label>
          <ion-toggle [(ngModel)]="preferences.soundEnabled" color="primary"></ion-toggle>
        </ion-item>

        <ion-item>
          <ion-icon name="phone-portrait-outline" slot="start"></ion-icon>
          <ion-label>Vibração</ion-label>
          <ion-toggle [(ngModel)]="preferences.vibrationEnabled" color="primary"></ion-toggle>
        </ion-item>
      </ion-list>
    </div>

    <!-- About Section -->
    <div class="settings-section">
      <h2>Sobre</h2>
      <ion-list>
        <ion-item button>
          <ion-icon name="information-circle-outline" slot="start"></ion-icon>
          <ion-label>Sobre o LogStudy</ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>

        <ion-item button>
          <ion-icon name="document-text-outline" slot="start"></ion-icon>
          <ion-label>Termos de Uso</ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>

        <ion-item button>
          <ion-icon name="shield-checkmark-outline" slot="start"></ion-icon>
          <ion-label>Política de Privacidade</ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>

        <ion-item>
          <ion-icon name="code-slash-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Versão</h3>
            <p>1.0.0</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>

    <!-- Logout Button -->
    <div class="logout-section">
      <ion-button expand="block" fill="outline" color="danger" (click)="logout()">
        <ion-icon name="log-out-outline" slot="start"></ion-icon>
        Sair
      </ion-button>
    </div>
  </div>
</ion-content>
